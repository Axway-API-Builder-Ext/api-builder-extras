flow-nodes:
  elasticsearch:
    name: Elasticsearch
    icon: elasticsearch-icon.png
    description: 'Elasticsearch is a distributed, RESTful search and analytics engine capable of addressing a growing number of use cases. As the heart of the Elastic Stack, it centrally stores your data so you can discover the expected and uncover the unexpected. Learn more: https://www.elastic.co/guide/en/elasticsearch/reference/7.x/search-search.html'
    category: Elastic
    methods:
      search: 
        name: Search
        description: Allows you to execute a search query and get back search hits that match the query. The query can either be provided using a simple query string as a parameter, or using a request body. To ensure fast responses, the search API will respond with partial results if one or more shards fail. See Shard failures for more information.
        parameters:
          index:
            name: Index
            description: Comma-separated list or wildcard expression of index names used to limit the request.
            required: true
            initialType: string
            schema:
              type: string
          query:
            name: Query
            description: 'Defines the search definition using the Query DSL. Learn more: https://www.elastic.co/guide/en/elasticsearch/reference/7.x/query-dsl.html'
            required: false
            initialType: object
            schema:
              type: object
              options:
                multilineWrapper:
                  before: "{ \"query\": "
                  after: "\n}"
          from:
            name: From
            description: Defines the starting offset. Defaults to 0.
            required: false
            initialType: number
            schema:
              type: number
          size:
            name: Size
            description: Defines the number of hits to return. Defaults to 10.
            required: false
            initialType: number
            schema:
              type: number
          sort:
            name: Sort
            description: 'A comma-separated list of <field>:<direction> pairs.'
            required: false
            initialType: string
            schema:
              type: string
          _source:
            name: Include source
            description: True or false to return the _source field or not, or a list of fields to return.
            required: false
            initialType: boolean
            schema:
              default: true
              type: boolean
          _source_excludes:
            name: Exclude source fields
            description: A list of fields to exclude from the returned _source field.
            required: false
            initialType: array
            schema:
              type: array
          _source_includes:
            name: Include source fields
            description: A list of fields to extract and return from the _source field. 
            required: false
            initialType: array
            schema:
              type: array
          allow_no_indices:
            name: Allow no indices
            description: If true, the request does not return an error if a wildcard expression or _all value retrieves only missing or closed indices. This parameter also applies to index aliases that point to a missing or closed index.
            required: false
            group: Advanced Options
            initialType: boolean
            schema:
              default: false
              type: boolean
          allow_partial_search_results:
            name: Allow partial search results
            description: Indicates if an error should be returned if there is a partial search failure or timeout. Defaults to true.
            required: false
            group: Advanced Options
            initialType: boolean
            schema:
              default: true
              type: boolean
# Seems not supported by the Node-Library
#          default_operator:
#            description: The default operator for query string query (AND or OR). Defaults to OR.
#            required: false
#            group: Advanced Options
#            initialType: string
#            schema:
#              type: string
          request_cache:
            name: Request cache
            description: If true, request cache will be used for this request. Defaults to index level settings.
            required: false
            group: Advanced Options
            initialType: boolean
            schema:
              default: false
              type: boolean
          rest_total_hits_as_int:
            name: Total hits as int
            description: Indicates whether hits.total should be rendered as an integer or an object in the rest search response. Defaults to false.
            required: false
            group: Advanced Options
            initialType: boolean
            schema:
              default: false
              type: boolean
          batched_reduce_size:
            name: Batched reduce size
            description: The number of shard results that should be reduced at once on the coordinating node. This value should be used as a protection mechanism to reduce the memory overhead per search request if the potential number of shards in the request can be large. Defaults to 512.
            required: false
            group: Expert Options
            initialType: number
            schema:
              type: number
          ccs_minimize_roundtrips:
            name: Minimize roundtrips
            description: Indicates whether network round-trips should be minimized as part of cross-cluster search requests execution. Defaults to true.
            required: false
            group: Expert Options
            initialType: boolean
            schema:
              default: true
              type: boolean
#          df:
#            description: Defines the field to use as default where no field prefix is given in the query string.
#            required: false
#            group: Expert Options
#            initialType: string
#            schema:
#              type: string
          docvalue_fields:
            name: DocValue fields
            description: A comma-separated list of fields to return as the docvalue representation of a field for each hit.
            required: false
            group: Expert Options
            initialType: string
            schema:
              type: string
          expand_wildcards:
            name: Expand wildcards
            description: Controls what kind of indices that wildcard expressions can expand to. Defaults to open.
            required: false
            group: Expert Options
            initialType: string
            schema:
              type: string
              enum:
                - all
                - open
                - closed
                - hidden
                - none
          explain:
            name: Explain
            description: If true, returns detailed information about score computation as part of a hit. Defaults to false.
            required: false
            group: Expert Options
            initialType: boolean
            schema:
              default: false
              type: boolean
          ignore_throttled:
            name: Ignore throttled
            description: If true, concrete, expanded or aliased indices will be ignored when throttled. Defaults to false.
            required: false
            group: Expert Options
            initialType: boolean
            schema:
              default: false
              type: boolean
          ignore_unavailable:
            name: Ignore unavailable
            description: If true, missing or closed indices are not included in the response. Defaults to false. 
            required: false
            group: Expert Options
            initialType: boolean
            schema:
              default: false
              type: boolean
          lenient:
            name: Lenient
            description: If true, format-based query failures (such as providing text to a numeric field) will be ignored. Defaults to false.
            required: false
            group: Advanced Options
            initialType: boolean
            schema:
              default: false
              type: boolean
          max_concurrent_shard_requests:
            name: Max concurrent shard requests
            description: Defines the number of concurrent shard requests per node this search executes concurrently. This value should be used to limit the impact of the search on the cluster in order to limit the number of concurrent shard requests. Defaults to 5.
            required: false
            group: Expert Options
            initialType: number
            schema:
              type: number
          pre_filter_shard_size:
            name: Pre filter shard size
            description: Defines a threshold that enforces a pre-filter roundtrip to prefilter search shards based on query rewriting if the number of shards the search request expands to exceeds the threshold. This filter roundtrip can limit the number of shards significantly if for instance a shard can not match any documents based on itâ€™s rewrite method ie. if date filters are mandatory to match but the shard bounds and the query are disjoint. Defaults to 128.
            required: false
            group: Expert Options
            initialType: number
            schema:
              type: number
          preference:
            name: Preference
            description: Specifies the node or shard the operation should be performed on. Random by default.
            required: false
            group: Expert Options
            initialType: string
            schema:
              type: string
          q:
            name: Lucene query
            description: Query in the Lucene query string syntax.
            required: false
            group: Expert Options
            initialType: string
            schema:
              type: string
          routing:
            name: Routing
            description: Specifies how long a consistent view of the index should be maintained for scrolled search.
            required: false
            group: Expert Options
            initialType: string
            schema:
              type: string
          search_type:
            name: Search type
            description: Defines the type of the search operation.
            required: false
            group: Expert Options
            initialType: string
            schema:
              type: string
              enum:
                - query_then_fetch
                - dfs_query_then_fetch
          seq_no_primary_term:
            name: Seq no primary term
            description: If true, returns sequence number and primary term of the last modification of each hit.
            required: false
            group: Expert Options
            initialType: boolean
            schema:
              default: false
              type: boolean
          stats:
            name: Stats
            description: Specific tag of the request for logging and statistical purposes.
            required: false
            group: Expert Options
            initialType: string
            schema:
              type: string
          stored_fields:
            name: Stored fields
            description: A comma-separated list of stored fields to return as part of a hit. 
            required: false
            group: Expert Options
            initialType: string
            schema:
              type: string
          suggest_field:
            name: Suggest field
            description: Specifies which field to use for suggestions. 
            required: false
            group: Suggestion Options
            initialType: string
            schema:
              type: string
          suggest_mode:
            name: Suggest mode
            description: Specifies suggest mode. Defaults to missing. 
            required: false
            group: Suggestion Options
            initialType: string
            schema:
              type: string
              enum:
                - always
                - missing
                - popular
          suggest_size:
            name: Suggest size
            description: Defines how many suggestions to return in response. 
            required: false
            group: Suggestion Options
            initialType: number
            schema:
              type: number
          suggest_text:
            name: Suggest text
            description: The source text for which the suggestions should be returned.
            required: false
            group: Suggestion Options
            initialType: string
            schema:
              type: string
          terminate_after:
            name: Terminate after
            description: The maximum number of documents to collect for each shard, upon reaching which the query execution will terminate early.
            required: false
            group: Expert Options
            initialType: number
            schema:
              type: number
          timeout:
            name: Timeout
            description: Specifies the period of time to wait for a response. If no response is received before the timeout expires, the request fails and returns an error. Defaults to 30s.
            required: false
            group: Expert Options
            initialType: string
            schema:
              type: string
          track_scores:
            name: Track scores
            description: Indicates if the number of documents that match the query should be tracked.
            required: false
            group: Expert Options
            initialType: boolean
            schema:
              default: false
              type: boolean
          track_total_hits:
            name: Track total hits
            description: Indicates if the number of documents that match the query should be tracked.
            required: false
            group: Advanced Options
            initialType: boolean
            schema:
              default: false
              type: boolean
          typed_keys:
            name: Typed keys
            description: Specifies whether aggregation and suggester names should be prefixed by their respective types in the response.
            required: false
            group: Advanced Options
            initialType: boolean
            schema:
              default: false
              type: boolean
          version:
            name: Version
            description: If true, returns document version as part of a hit. 
            required: false
            group: Advanced Options
            initialType: boolean
            schema:
              default: false
              type: boolean
        returns:
          name: Next
          description: Context variable will contain the Elasticsearch result
          context: $.result
          schema:
            type: object
        throws:
          name: Error
          description: An unexpected error was encountered.
          context: $.error
          schema:
            type: object
            properties:
              message:
                type: string
        
      getTemplate: 
        name: Get Index Template
        description: The comma separated names of the legacy index templates
        parameters:
          name:
            name: Index template name
            description: Name of the legacy index template.
            required: true
            initialType: string
            schema:
              type: string
          flatSettings:
            name: Flat settings
            description: "Return settings in flat format (default: false)"
            required: false
            initialType: boolean
            schema:
              default: false
              type: boolean
        outputs:
          next:
            name: Next
            description: Return the index template loaded from Elasticsearch.
            context: $.indexTemplate
            schema:
              type: object
          notFound:
            name: Not found
            description: Exit used if the index template is not present in Elasticsearch.
            context: $.message
            schema:
              type: string
          error:
            name: Error
            description: An unexpected error happened
            context: $.error
            schema:
              type: object

      putTemplate: 
        name: Put Index Template
        description: Updates a legacy index template
        parameters:
          name:
            name: Index template name
            description: Name of the legacy index template.
            required: true
            initialType: string
            schema:
              type: string
          body:
            name: Template
            description: The template definition.
            required: true
            initialType: object
            schema:
              type: object
          create:
            name: Index template name
            description: Whether the index template should only be added if new or can also replace an existing one.
            required: false
            initialType: boolean
            schema:
              default: false
              type: boolean
          order:
            name: Order
            description: The order for this template when merging multiple matching ones (higher numbers are merged later, overriding the lower numbers).
            required: false
            initialType: number
            schema:
              type: number
        returns:
          name: Next
          description: The index template loaded from Elasticsearch.
          context: $.indexTemplate
          schema:
            type: object
        throws:
          name: Error
          description: An unexpected error was encountered.
          context: $.error
          schema:
            type: object
            properties:
              message:
                type: string

      getMapping: 
        name: Get Index Mapping
        description: Gets an index mapping from Elasticsearch
        parameters:
          index:
            name: Index-Name
            description: Name of the index the mapping should be retrieved
            required: true
            initialType: string
            schema:
              type: string
          includeTypeName:
            name: Include type name
            description: "Whether to add the type name to the response (default: false)."
            required: false
            initialType: boolean
            schema:
              default: false
              type: boolean
          ignoreUnavailable:
            name: Include Unavailable
            description: Whether specified concrete indices should be ignored when unavailable (missing or closed).
            required: false
            initialType: boolean
            schema:
              default: false
              type: boolean
          allowNoIndices:
            name: Allow no indices
            description: Whether to ignore if a wildcard indices expression resolves into no concrete indices. (This includes _all string or when no indices have been specified)
            required: false
            initialType: boolean
            schema:
              default: false
              type: boolean
          expandWildcards:
            name: Expand wildcards
            description: "Whether to expand wildcard expression to concrete indices that are open, closed or both. Default: open"
            required: false
            initialType: string
            schema:
              type: string
              enum:
                - open
                - closed
                - hidden
                - none
                - all
          masterTimeout:
            name: Master timeout
            description: Specify timeout for connection to master
            required: false
            initialType: number
            schema:
              type: number
        returns:
          name: Next
          description: The mapping loaded from Elasticsearch.
          context: $.indexMapping
          schema:
            type: object
        throws:
          name: Error
          description: An unexpected error was encountered.
          context: $.error
          schema:
            type: object
            properties:
              message:
                type: string

      putMapping: 
        name: Put Index Mapping
        description: Updates an index mapping
        parameters:
          index:
            name: Index-Name
            description: A comma-separated list of index names the mapping should be added to (supports wildcards); use _all or omit to add the mapping on all indices.
            required: true
            initialType: string
            schema:
              type: string
          body:
            name: Mapping
            description: The mapping definition.
            required: true
            initialType: object
            schema:
              type: object
          includeTypeName:
            name: Include type name
            description: "Whether to add the type name to the response (default: false)."
            required: false
            initialType: boolean
            schema:
              default: false
              type: boolean
          ignoreUnavailable:
            name: Include Unavailable
            description: Whether specified concrete indices should be ignored when unavailable (missing or closed).
            required: false
            initialType: boolean
            schema:
              default: false
              type: boolean
          allowNoIndices:
            name: Allow no indices
            description: Whether to ignore if a wildcard indices expression resolves into no concrete indices. (This includes _all string or when no indices have been specified)
            required: false
            initialType: boolean
            schema:
              default: false
              type: boolean
          expandWildcards:
            name: Expand wildcards
            description: "Whether to expand wildcard expression to concrete indices that are open, closed or both. Default: open"
            required: false
            initialType: string
            schema:
              type: string
              enum:
                - open
                - closed
                - hidden
                - none
                - all
          masterTimeout:
            name: Master timeout
            description: Specify timeout for connection to master
            required: false
            initialType: number
            schema:
              type: number
        returns:
          name: Next
          description: The mapping loaded from Elasticsearch.
          context: $.indexMapping
          schema:
            type: object
        throws:
          name: Error
          description: An unexpected error was encountered.
          context: $.error
          schema:
            type: object
            properties:
              message:
                type: string